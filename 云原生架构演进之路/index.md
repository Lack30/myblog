# 云原生架构演进之路

## 架构的演进
单体 -> 分布式 -> 微服务 -> 云原生

### 单体架构

![](https://raw.githubusercontent.com/xingyys/myblog/main/posts/images/20210926200654.png)

特点:
- 所有的功能集成在一个项目工程中。
- 通过部署应用集群和数据库集群来提高系统的性能。

优点:
- 项目架构简单，前期开发成本低，周期短，小型项目的首选。
- 开发效率高，模块之间交互采用本地方法调用。
- 容易部署，运维成本小。
- 容易测试: IDE 都是为开发单个应用设计的，容易测试——在本地就可以启动完整的系统。

缺点:
- 全部功能集成在一个工程中，对于大型项目不易开发、扩展及维护。
- 版本迭代速度逐渐变慢，修改一个地方就要将整个应用全部编译、部署、启动，开发及测试周期过长。
- 无法按需伸缩，通过集群的方式来实现水平扩展，无法针对某业务按需伸缩。

> 一个鸡蛋放在一个篮子里。

### 分布式架构

![](https://raw.githubusercontent.com/xingyys/myblog/main/posts/images/20210926200756.png)

特点:
- 按业务垂直拆分成一个一个的单体系统，此架构也称为垂直架构。
- 系统与系统之间存在数据冗余，耦合性大。
- 系统之间的接口多为实现数据同步。

优点:
- 通过垂直拆分，每个子系统变成小型系统，功能简单，前期开发成本低，周期短。
- 每个子系统可按需伸缩。
- 每个子系统可采用不同的技术。

缺点:
- 子系统之间存在数据冗余、功能冗余，耦合性高。
- 按需伸缩粒度不够，对同一个子系统中的不同的业务无法实现，比如订单管理和用户管理。

> 实际上还是多个单体连在一起。

### 微服务架构

![](https://raw.githubusercontent.com/xingyys/myblog/main/posts/images/20210926201848.png)

特点:
- 服务层按业务拆分为一个一个的微服务。
- 微服务的职责单一。
- 微服务之间采用 RestFul、RPC 等轻量级协议传输。
- 有利于采用前后端分离架构。

优点:
- 服务拆分粒度更细，有利于资源重复利用，提供开发效率。
- 可以更加精准的指定每个服务的优化方案，按需伸缩。
- 适用于互联网时代，产品迭代周期更短。

缺点:
- 开发的复杂性增加，因为一个业务流程需要的多个微服务通过网络交互来完成。
- 微服务过多，服务治理成本高，不利于系统维护。

### 云原生架构
云 + 原生:
- 原生: 指一个服务在开发阶段就完成网络和服务治理的问题。
- 云: 这个服务基于云计算环境。

特点:
- 设计之初就以云环境为运行环境的微服务。

特点:
- 继承微服务的特点。
- 容器化。
- 动态管理。

缺点:
- 产商锁定。
- 部署复杂性。
- 框架兼容性。

> 由于docker, k8s 等容器技术的出现使云原生成为可能。

每一个新架构的出现都是为了解决上一代架构所遗留的问题，但同时又引进新的问题。*软件中没有银弹*。

## 架构演进的动力。
1. 去中心化。
2. 连接/共享
