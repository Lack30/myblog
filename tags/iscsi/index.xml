<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>iscsi - 标签 - lack 的个人博客</title>
        <link>http://xingyys.tech/tags/iscsi/</link>
        <description>iscsi - 标签 - lack 的个人博客</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 06 Aug 2020 15:21:50 &#43;0800</lastBuildDate><atom:link href="http://xingyys.tech/tags/iscsi/" rel="self" type="application/rss+xml" /><item>
    <title>Scst结合FC</title>
    <link>http://xingyys.tech/posts/linux/scst%E7%BB%93%E5%90%88fc/</link>
    <pubDate>Thu, 06 Aug 2020 15:21:50 &#43;0800</pubDate><author>
        <name>Lack</name>
    </author><guid>http://xingyys.tech/posts/linux/scst%E7%BB%93%E5%90%88fc/</guid>
    <description><![CDATA[SCST 是 iscsi 的一种实现方式，它既可以使用 iscsi 协议共享本地磁盘，同时也支持 FC 协议。FC 协议需要硬件 FC HBA 卡的支持。 SCST 和 FC 的环境搭建如下看这里 。
环境配置 接下来 SCST 和 FC 的使用。首先需要有 scst 的环境： 保证 linux 内核中加载了 qla。使用 scstadm 查看所支持的驱动： 如果使用 FC 去共享磁盘，scst 需要创建和 FC 设备对应的 target。FC 设备和 target 属于一对一关系，而且创建 target 的名称要和 FC 设备的 ID 相同。查看 FC 设备的 ID 可以用以下的方式：1.查看内核中 qla2x00t (/sys/kernel/scst_tgt/targets/qla2x00t) 目录下的内容 2.直接查看 FC 设备的 port_id (/sys/class/fc_host/hostx/port_name)， 配置 FC SCST 服务端配置 创建 target, FC 设备和 target 一对一。
scstadmin -add_target 50:01:10:a0:00:16:bf:30 -driver qla2x00t 创建 device 对应本地的块文件]]></description>
</item><item>
    <title>Scst在线扩容</title>
    <link>http://xingyys.tech/posts/linux/scst%E5%9C%A8%E7%BA%BF%E6%89%A9%E5%AE%B9/</link>
    <pubDate>Thu, 09 Apr 2020 14:59:25 &#43;0800</pubDate><author>
        <name>Lack</name>
    </author><guid>http://xingyys.tech/posts/linux/scst%E5%9C%A8%E7%BA%BF%E6%89%A9%E5%AE%B9/</guid>
    <description><![CDATA[SCST 共享的磁盘支持在线扩容。操作如下：
scst 服务端 首先有一块 zfs 存储卷，现在将其容量从 15G 扩展到 20G。
zfs set volsize=20G tank/vol 修改 scst 中 device 的 size 属性
scstadmin -set_dev_attr device1 -attributes size=21474836480 -noprompt iscsi 客户端 重新扫描 target
iscsiadm -m node --target &lt;target_name&gt; -R 扩展磁盘容量，如果磁盘存储 mount 状态则先 umount。
resize2fs /dev/sdX e2fsck -f /dev/sdX resize2fs /dev/sdX 重新挂载，使用 df 即可发现磁盘的容量被修改。
FC 客户端 重新扫描 FC host
echo &#34;- - -&#34; &gt; /sys/class/scst_host/hostX/scan 扩展磁盘容量如上。]]></description>
</item><item>
    <title>Scst 安装和使用</title>
    <link>http://xingyys.tech/posts/linux/scst%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</link>
    <pubDate>Wed, 08 Apr 2020 14:59:25 &#43;0800</pubDate><author>
        <name>Lack</name>
    </author><guid>http://xingyys.tech/posts/linux/scst%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/</guid>
    <description><![CDATA[安装 scst 安装 scst
wget https://ncu.dl.sourceforge.net/project/scst/scst-3.2.0.7058.tar.bz2 yum install bzip2 bunzip2 scst-3.2.0.7058.tar.bz2 tar xf scst-3.2.0.7058.tar 编译安装scst
make 2perf make scst make scst_install make iscsi make iscsi_install make scstadm make scstadm_install 查看是否被加载到内核了
lsmod |grep scst modinfo scst 启动 scst
modprobe scst modprobe scst_vdisk modprobe scst_disk modprobe scst_user modprobe scst_modisk modprobe scst_processor modprobe scst_raid modprobe scst_tape modprobe scst_cdrom modprobe scst_changer modprobe iscsi-scst iscsi-scstd 创建流程 创建 target
scstadmin -add_target iqn.1994-05.com.redhat:pv -driver iscsi 创建 block]]></description>
</item></channel>
</rss>
